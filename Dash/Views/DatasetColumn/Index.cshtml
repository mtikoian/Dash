@using Dash.Resources
@using Dash.Models
@model Dataset

@using (Html.BeginBodyContent())
{
    @Html.Breadcrumbs(new List<Breadcrumb> {
        new Breadcrumb(Datasets.ViewAll, "Index", "Dataset"),
        new Breadcrumb(Datasets.EditDataset, Model.FormAction, "Dataset", new { Id = Model.Id }),
        new Breadcrumb(Datasets.Columns, "Index", "DatasetColumn", new { Id = Model.Id })
    });

    <partial name="_Toast" />

    <tab-list>
        <tab-item no-render="@(!User.IsInRole("dataset.edit"))">
            @Html.AuthorizedActionLink(Datasets.Overview, "Edit", "Dataset", new { Id = Model.Id }, new { @class = "btn btn-link", role = "tab" })
        </tab-item>
        <tab-item no-render="@(!User.IsInRole("datasetjoin.index"))">
            @Html.AuthorizedActionLink(Datasets.Joins, "Index", "DatasetJoin", new { Id = Model.Id }, new { @class = "btn btn-link", role = "tab" })
        </tab-item>
        <tab-item>
            <a id="columnsTab" class="active" role="tab" data-toggle="tab" aria-controls="columnsContent">@Html.Raw(Datasets.Columns)</a>
        </tab-item>
    </tab-list>

    <tab-panel id="columnsContent" label-id="columnsTab">
        @using (Html.BeginToolbar())
        {
            @Html.AuthorizedButton(Core.Add, "Create", "DatasetColumn", new { Id = Model.Id }, DashClasses.BtnPrimary, hasAccess: User.IsInRole("datasetcolumn.create"))
            @Html.AuthorizedButton(Datasets.Import, "Import", "DatasetColumn", new { Id = Model.Id }, DashClasses.BtnInfo, hasAccess: User.IsInRole("datasetcolumn.import"))
        }

        <div class="col-12">
            <div data-toggle="table" data-json="@Model.Table.ToJson"></div>
        </div>
    </tab-panel>
}
